# Repository Guidelines

## Project Structure & Module Organization
Source lives in `src/`, built around Next.js 15 app router. Pages and API routes sit under `src/app`, grouped by feature folders (e.g. `payment`, `tradies`). Shared UI in `src/components`, domain helpers in `src/lib`, React context providers in `src/contexts`, and typed contracts in `src/types`. Assets stay in `public/`. Deployment scripts and manual runbooks live in `manual-deploy/` and `scripts/`. Keep new modules co-located with their feature folder and export reusable pieces from `src/lib`.

## Build, Test, and Development Commands
`bun install` – install dependencies (use `npm install` only if Bun is unavailable).
`bun run dev` – start the local Next.js server on port 3000 with Turbopack.
`bun run build` – produce an optimized production build; validates route configs.
`bun run start` – serve the production build locally.
`bun run lint` – type-check via `tsc` and run `next lint`.
`bun run format` – apply Biome formatting.
`node test_api.js` – quick smoke test for the tradie projects API; update the script with realistic IDs when adding endpoints.

## Coding Style & Naming Conventions
TypeScript with modern React (Server/Client components). Components and hooks use PascalCase (`ClientBody.tsx`) and camelCase (`useTradieStore`). Files in `src/app` follow Next route naming (e.g. `page.tsx`, `layout.tsx`). Prefer descriptive directory names over deep nesting. Biome enforces spaced indentation (2 spaces) and double quotes; run `bun run format` before committing. Follow Tailwind utility ordering as generated by `tailwind-merge`.

## Testing Guidelines
There is no unified test runner yet; contributions should include at least a scriptable smoke test mirroring `test_api.js`. Place new checks beside the feature (e.g. `src/app/payment/payment.test.ts`) and document how to execute them. When adding API work, include sample curl or `node` scripts under `scripts/` and ensure they run against `bun run dev`. Target meaningful coverage for new logic and describe gaps in the PR.

## Commit & Pull Request Guidelines
Keep commit messages short, present-tense summaries similar to `fix bugs` or `payment adjustment done`. Bundle related changes per commit. For PRs, provide a feature overview, testing notes (commands run or scripts updated), and link any tickets. Include UI screenshots or recordings whenever views in `src/app` change. Confirm lint/format commands pass before requesting review.
